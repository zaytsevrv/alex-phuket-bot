# üéØ –ò–¢–û–ì–û–í–´–ô –û–¢–ß–ï–¢: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥–∏–±—Ä–∏–¥–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞

## –ü—Ä–æ–±–ª–µ–º–∞ –∫–æ—Ç–æ—Ä—É—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–æ–±—â–∏–ª
> "—Ç–µ—Å—Ç - –Ω–∞–ø–∏—Å–∞–ª —Ö–æ—á—É —É–≤–∏–¥–µ—Ç—å —Å–ª–æ–Ω–æ–≤ - –¥–∏–ø—Å–∏–∫ –Ω–µ –ø–æ–¥–∫–ª—é—á–∏–ª—Å—è"

–ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏–ª "—Ö–æ—á—É —É–≤–∏–¥–µ—Ç—å —Å–ª–æ–Ω–æ–≤", –±–æ—Ç:
- ‚ùå –ù–µ –Ω–∞—Ö–æ–¥–∏–ª —Ç—É—Ä—ã –ø—Ä–æ —Å–ª–æ–Ω–æ–≤
- ‚ùå –í—ã–∑—ã–≤–∞–ª DeepSeek –≤–º–µ—Å—Ç–æ –ø–æ–∏—Å–∫–∞
- ‚ùå –ò–ª–∏ –Ω–∞—Ö–æ–¥–∏–ª –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ç—É—Ä—ã (–ø—Ä–æ –æ—Å—Ç—Ä–æ–≤–∞ –≤–º–µ—Å—Ç–æ —Å–ª–æ–Ω–æ–≤)

## –ö–æ—Ä–Ω–µ–≤–∞—è –ø—Ä–∏—á–∏–Ω–∞
–§—É–Ω–∫—Ü–∏—è `search_tours_by_keywords_hybrid()` –ø—Ä–∏ –ø–æ–∏—Å–∫–µ –ø–æ —Å–ª–æ–≤–∞–º —Ñ—Ä–∞–∑—ã:

```
–§—Ä–∞–∑–∞: "—Ö–æ—á—É —É–≤–∏–¥–µ—Ç—å —Å–ª–æ–Ω–æ–≤"
–°–ª–æ–≤–∞: ['—Ö–æ—á—É', '—É–≤–∏–¥–µ—Ç—å', '—Å–ª–æ–Ω–æ–≤']

–î–û –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø:
1. –ò—â–µ—Ç '—Ö–æ—á—É' ‚Üí –Ω–µ –Ω–∞–π–¥–µ–Ω–æ
2. –ò—â–µ—Ç '—É–≤–∏–¥–µ—Ç—å' ‚Üí –ù–ê–ô–î–ï–ù–û 7 —Ç—É—Ä–æ–≤! (—Å–æ–¥–µ—Ä–∂–∞—Ç —Å–ª–æ–≤–æ "—É–≤–∏–¥–µ—Ç—å")
3. –í–û–ó–í–†–ê–©–ê–ï–¢ —ç—Ç–∏ —Ç—É—Ä—ã (–ø—Ä–æ –æ—Å—Ç—Ä–æ–≤–∞, –ø–æ–∏—Å–∫–∏, –∏ —Ç.–¥.)
4. –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç '—Å–ª–æ–Ω–æ–≤' ‚Üê –≥–ª–∞–≤–Ω–æ–µ —Å–ª–æ–≤–æ!

–†–ï–ó–£–õ–¨–¢–ê–¢: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ç—É—Ä—ã ‚ùå
```

## –†–µ—à–µ–Ω–∏–µ: –§–∏–ª—å—Ç—Ä —Å—Ç–æ–ø-—Å–ª–æ–≤ + —É–º–Ω–∞—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞

```python
stop_words = {
    '—Ö–æ—á—É', '–¥–∞–≤–∞–π—Ç–µ', '—É–∫–∞–∂–∏—Ç–µ', '–ø–æ—Å–æ–≤–µ—Ç—É–π—Ç–µ',
    '—á—Ç–æ', '–∫–∞–∫', '–≥–¥–µ', '–∫–æ–≥–¥–∞',
    '—É–≤–∏–¥–µ—Ç—å', '–≤–∏–¥–µ—Ç—å', '–ø–æ–∫–∞–∑–∞—Ç—å', '—É–∑–Ω–∞—Ç—å',  # ‚Üê –î–æ–±–∞–≤–ª–µ–Ω—ã!
    # ... –∏ –µ—â–µ 10+ —Å–ª–æ–≤
}

–ü–û–°–õ–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø:
1. –û—Ç—Å–µ–∏–≤–∞–µ–º —Å—Ç–æ–ø-—Å–ª–æ–≤–∞
2. –û—Å—Ç–∞—é—Ç—Å—è: ['—Å–ª–æ–Ω–æ–≤'] ‚Üê —Ç–æ–ª—å–∫–æ –≤–∞–∂–Ω–æ–µ —Å–ª–æ–≤–æ!
3. –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ –¥–ª–∏–Ω–µ (—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ—Å—Ç—å)
4. –ò—â–µ–º '—Å–ª–æ–Ω–æ–≤' ‚Üí –ù–ê–ô–î–ï–ù–û 2 —Ç—É—Ä–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ! ‚úÖ

–†–ï–ó–£–õ–¨–¢–ê–¢: –¢—É—Ä—ã –ø—Ä–æ —Å–ª–æ–Ω–æ–≤ ‚úÖ
```

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### ‚úÖ –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–∏—Å–∫: 3/3 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ–π–¥–µ–Ω–æ

| –ó–∞–ø—Ä–æ—Å | –ù–∞–π–¥–µ–Ω–æ | –û–∂–∏–¥–∞–µ–º–æ–µ | –°—Ç–∞—Ç—É—Å |
|--------|---------|-----------|--------|
| "—Ö–æ—á—É —É–≤–∏–¥–µ—Ç—å —Å–ª–æ–Ω–æ–≤" | 2 —Ç—É—Ä–∞ –ø—Ä–æ —Å–ª–æ–Ω–æ–≤ | ‚â•2 | ‚úÖ |
| "–ø–æ—Å–æ–≤–µ—Ç—É–π—Ç–µ —Ç—É—Ä —Å –∂–∏–≤–æ—Ç–Ω—ã–º–∏" | 2 —Ç—É—Ä–∞ | ‚â•1 | ‚úÖ |
| "—Ä–∞—Ñ—Ç–∏–Ω–≥" | 1 —Ç—É—Ä | ‚â•1 | ‚úÖ |

### ‚úÖ –ú–µ–Ω—é –∫–∞—Ç–µ–≥–æ—Ä–∏–π: 2/2 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ–π–¥–µ–Ω–æ

| –≠–ª–µ–º–µ–Ω—Ç | –°—Ç–∞—Ç—É—Å |
|---------|--------|
| –ö–Ω–æ–ø–∫–∞ "üîÑ –ù–æ–≤—ã–π –ø–æ–∏—Å–∫" | ‚úÖ –ü—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç |
| –•–ò–¢ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (–ú–æ—Ä–µ, –°—É—à–∞ —Å–µ–º–µ–π–Ω—ã–µ, –°—É—à–∞ –æ–±–∑–æ—Ä–Ω—ã–µ) | ‚úÖ –í–∏–¥–Ω—ã –æ—Ç–¥–µ–ª—å–Ω–æ |

**–ò–¢–û–ì–û: 5‚úÖ / 5 —Ç–µ—Å—Ç–æ–≤**

## –ó–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ —Ñ–∞–π–ª—ã

### –û—Å–Ω–æ–≤–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:
1. [bot.py](bot.py#L415-L450) - —Ñ—É–Ω–∫—Ü–∏—è `search_tours_by_keywords_hybrid()`
   - –î–æ–±–∞–≤–ª–µ–Ω –Ω–∞–±–æ—Ä `stop_words` —Å ~25 —Å–ª–æ–≤–∞–º–∏
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å—Ç–æ–ø-—Å–ª–æ–≤ –ø–µ—Ä–µ–¥ –ø–æ–∏—Å–∫–æ–º
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –¥–ª–∏–Ω–µ —Å–ª–æ–≤–∞ (—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ—Å—Ç—å)

### –¢–µ—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã:
1. [test_phrase_search.py](test_phrase_search.py) - —Ç–µ—Å—Ç—ã —Ñ—Ä–∞–∑–æ–≤–æ–≥–æ –ø–æ–∏—Å–∫–∞ (3 —Å—Ü–µ–Ω–∞—Ä–∏—è)
2. [test_complete_hybrid.py](test_complete_hybrid.py) - –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–π —Ç–µ—Å—Ç (5 —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤)
3. [PHRASE_SEARCH_FIX.md](PHRASE_SEARCH_FIX.md) - –ø–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

‚ú® –ë–æ—Ç —Ç–µ–ø–µ—Ä—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç:
- ‚úÖ "—Ö–æ—á—É —É–≤–∏–¥–µ—Ç—å —Å–ª–æ–Ω–æ–≤" ‚Üí —Ç—É—Ä—ã –ø—Ä–æ —Å–ª–æ–Ω–æ–≤
- ‚úÖ "–ø–æ—Å–æ–≤–µ—Ç—É–π—Ç–µ –º–æ—Ä—Å–∫–∏–µ —Ç—É—Ä—ã" ‚Üí —Ç—É—Ä—ã –∏–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ "–ú–æ—Ä–µ"
- ‚úÖ –í—Å–µ –≤–∏–¥—ã –æ–ø–µ—á–∞—Ç–æ–∫ –∏ —Å–ª–æ–≤–æ—Ñ–æ—Ä–º (difflib fallback)
- ‚úÖ –ö–Ω–æ–ø–∫–∞ "üîÑ –ù–æ–≤—ã–π –ø–æ–∏—Å–∫" —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏

## –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

```bash
# –°–∏–Ω—Ç–∞–∫—Å–∏—Å
python3 -m py_compile bot.py

# –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–∏—Å–∫
python3 test_phrase_search.py

# –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π —Ç–µ—Å—Ç
python3 test_complete_hybrid.py
```
